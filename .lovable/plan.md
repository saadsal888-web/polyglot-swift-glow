

# نظام الألقاب التشجيعية

## الفكرة
نظام ألقاب ديناميكي يعطي الطالب ألقاب تحفيزية بناءً على أدائه وتفاعله مع التطبيق، ويظهر اللقب الحالي في البروفايل والصفحة الرئيسية.

## فئات الألقاب

### 1. ألقاب الجواهر (XP) - بناءً على إجمالي الجواهر المكتسبة

| الجواهر | اللقب |
|---|---|
| 0 | بداية قوية |
| 50+ | المثابر |
| 150+ | صديق الإنجليزي |
| 300+ | هاوي التعلّم |
| 500+ | المجتهد |
| 1000+ | يتقدّم بثبات |
| 2000+ | تحسّن واضح |
| 5000+ | قريب من الاحتراف |
| 10000+ | ملك التدريب |
| 20000+ | أسطورة المثابرة |

### 2. ألقاب الاستمرارية (Streak) - بناءً على أيام الدخول المتتالية

| الأيام | اللقب |
|---|---|
| 1 | خطوة للأمام |
| 3 | ملتزم |
| 7 | ما يفوّت يوم |
| 14 | متعلم يومي |
| 30 | محارب الكلمات |
| 60 | لا يستسلم |
| 90 | ثابت الخطى |
| 180 | لا يمل |
| 365 | بطل الاستمرارية |

### 3. ألقاب الدروس - بناءً على عدد الدروس المكملة

| الدروس | اللقب |
|---|---|
| 1 | تعلّم صح |
| 3 | على الطريق الصحيح |
| 5 | يتحدى نفسه |
| 10 | يتمرّن بذكاء |
| 20 | تقدّم ملحوظ |

## التغييرات المطلوبة

### 1. قاعدة البيانات
- إضافة جدول `user_badges` لتخزين الألقاب المفتوحة لكل مستخدم مع تاريخ الحصول عليها
- سياسات RLS: المستخدم يقدر يقرأ ويضيف ألقابه فقط

### 2. ملف جديد: `src/lib/badges.ts`
- تعريف كل الألقاب كـ constants مع شروط فتحها
- دالة `calculateBadges()` تاخذ بيانات المستخدم (xp, streak, lessons) وترجع الألقاب المستحقة
- دالة `getActiveBadge()` ترجع أعلى لقب حالي للعرض

### 3. ملف جديد: `src/hooks/useBadges.ts`
- Hook يجلب ألقاب المستخدم ويحسب الألقاب الجديدة
- يحفظ الألقاب الجديدة في قاعدة البيانات تلقائياً

### 4. تعديل `src/pages/Lesson.tsx`
- حذف نظام "تحدي السرعة" (Speed Challenge) بالكامل
- بعد إكمال الدرس، التحقق من ألقاب جديدة وعرض إشعار toast

### 5. تعديل `src/pages/Index.tsx`
- عرض اللقب الحالي بجانب اسم المستخدم أو تحت الجواهر

### 6. تعديل `src/components/settings/ProfileCard.tsx`
- عرض اللقب الحالي تحت اسم المستخدم بدل المستوى فقط

### 7. صفحة جديدة: `src/pages/Badges.tsx` (اختياري)
- صفحة تعرض كل الألقاب (المفتوحة والمقفلة) كشبكة بطاقات

