

# عرض جميع المستويات في السلسلة التعليمية

## الوضع الحالي

البيانات في الداتابيس:
- A1: 66 وحدة (stage 1-60، مع تكرارات في 6-11)
- A2: 10 وحدات (stage 61-70)
- B1: 4 وحدات (stage 81-84)
- B2: 10 وحدات (stage 85-94)

الكود الحالي في `LessonsHub.tsx` يجلب كل الوحدات ويفلترها حسب المستوى المختار -- يعني **كل المستويات تظهر بالفعل**.

## المشكلة

1. **تكرار stage_number**: المراحل 6-11 في A1 عندها وحدتين لكل رقم مكرر -- هذا يسبب ارتباك في العرض
2. **عدد الدروس ثابت "4 دروس"**: الكود يفترض 4 دروس لكل وحدة بدون التحقق من الداتا الفعلية
3. **الإحصائيات**: `totalLessons = totalStages * 4` قد لا تكون دقيقة

## التعديلات المطلوبة

### 1. `src/pages/LessonsHub.tsx`

- جلب عدد الدروس الفعلي لكل module من `curriculum_lessons` بدل افتراض 4
- عرض `stage_number` صح حتى لو متكرر (أو استخدام الترتيب التسلسلي idx+1)
- تحديث إحصائيات الدروس والتحديات لتعكس العدد الحقيقي
- إضافة query لجلب عدد الدروس لكل module

### التفاصيل التقنية

**Query جديد** لجلب عدد الدروس:

```text
curriculum_lessons -> GROUP BY module_id -> COUNT
```

**تعديل العرض**:
- بدل عرض `mod.stage_number` المكرر، نعرض ترتيب تسلسلي (idx + 1) كرقم المرحلة في الدائرة
- بدل "4 دروس" ثابتة، نعرض العدد الفعلي من الداتا
- تحديث `totalLessons` ليكون مجموع الدروس الحقيقي

**الملفات المتأثرة**:

| الملف | التغيير |
|---|---|
| `src/pages/LessonsHub.tsx` | اضافة query لعدد الدروس، تعديل العرض التسلسلي، تحديث الاحصائيات |

